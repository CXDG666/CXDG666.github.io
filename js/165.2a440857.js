"use strict";(self["webpackChunktoutiao"]=self["webpackChunktoutiao"]||[]).push([[165],{6470:function(t,e,n){n.r(e),n.d(e,{default:function(){return v}});var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"all"},[e("div",{staticClass:"pubhead"},[t._v("发布")]),e("div",{staticClass:"pubtitle"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"请输入标题"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),e("div",{staticClass:"cate"},[e("div",{staticStyle:{"margin-left":"10px"}},[t._v("请选择你要发布的地方")]),e("div",{staticClass:"choose"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.item,expression:"item"}],on:{change:function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.item=e.target.multiple?n:n[0]}}},t._l(t.cate,(function(n,o){return e("option",{key:o,domProps:{value:n}},[t._v(t._s(n.name))])})),0)])]),e("div",{staticClass:"pubcontent"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticStyle:{"word-break":"break-all"},attrs:{placeholder:"请输入内容"},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),e("div",{staticClass:"tu"},[e("van-uploader",{attrs:{multiple:""},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})],1),e("div",{staticClass:"btn"},[e("van-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确定")])],1)])},a=[],i=(n(8146),n(8848)),s=(n(8),n(2614)),r=(n(9491),n(6450)),l=(n(606),n(4398)),c=(n(7658),n(70)),u=n(691),d={name:"public",data(){return{item:"",title:"",content:"",fileList:[],id:"",cate:[],a:123}},components:{[l.Z.name]:l.Z,[r.Z.name]:r.Z,[s.Z.name]:s.Z},created(){(0,c.ZP)({method:"get",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_cate_list"}).then((t=>{console.log(t.data.data),this.cate=t.data.data}))},methods:{submit(){(0,c.ZP)({method:"get",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/upload/token"}).then((t=>{let e=new FormData;e.append("token",t.data.token),e.append("file",this.fileList[0].file),e.append("key",(0,u.x0)()),(0,c.ZP)({method:"post",url:"https://upload-z1.qiniup.com",data:e}).then((t=>{(0,c.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/add_article",data:{title:this.title,content:this.content,cate_id:this.item._id,cate_name:this.item.name,author_id:localStorage.getItem("uid"),imageSrc:["http://toutiao.longxiaokj.com/"+t.data.key]}}).then((t=>{if(!localStorage.getItem("token"))return(0,i.Z)("请先登录");"成功"===t.data.msg?((0,r.Z)({type:"primary",message:"发布成功",duration:1e3}),this.$router.push("/index")):(0,r.Z)({type:"warning",message:t.data.msg,duration:1e3})}))}))}))}}},p=d,m=n(1001),f=(0,m.Z)(p,o,a,!1,null,"70dd64ad",null),v=f.exports},6450:function(t,e,n){n.d(e,{Z:function(){return Z}});var o=n(9299),a=n(6369),i=n(3915),s=n.n(i),r=n(855),l=n(4771),c=n(4867),u=n(6811),d=(0,r.d)("notify"),p=d[0],m=d[1];function f(t,e,n,o){var a={color:e.color,background:e.background};return t(u.Z,s()([{attrs:{value:e.value,position:"top",overlay:!1,duration:.2,lockScroll:!1},style:a,class:[m([e.type]),e.className]},(0,l.ED)(o,!0)]),[(null==n.default?void 0:n.default())||e.message])}f.props=(0,o.Z)({},c.M,{color:String,message:[Number,String],duration:[Number,String],className:null,background:String,getContainer:[String,Function],type:{type:String,default:"danger"}});var v,h,g=p(f),b=n(3370);function k(t){return(0,b.Kn)(t)?t:{message:t}}function y(t){if(!b.sk)return h||(h=(0,l.LI)(g,{on:{click:function(t){h.onClick&&h.onClick(t)},close:function(){h.onClose&&h.onClose()},opened:function(){h.onOpened&&h.onOpened()}}})),t=(0,o.Z)({},y.currentOptions,k(t)),(0,o.Z)(h,t),clearTimeout(v),t.duration&&t.duration>0&&(v=setTimeout(y.clear,t.duration)),h}function C(){return{type:"danger",value:!0,message:"",color:void 0,background:void 0,duration:3e3,className:"",onClose:null,onClick:null,onOpened:null}}y.clear=function(){h&&(h.value=!1)},y.currentOptions=C(),y.setDefaultOptions=function(t){(0,o.Z)(y.currentOptions,t)},y.resetDefaultOptions=function(){y.currentOptions=C()},y.install=function(){a.ZP.use(g)},y.Component=g,a.ZP.prototype.$notify=y;var Z=y},9491:function(t,e,n){n(1958),n(6196),n(3332),n(6742),n(2666)},6811:function(t,e,n){var o=n(855),a=n(3370),i=n(4867),s=n(9858),r=(0,o.d)("popup"),l=r[0],c=r[1];e["Z"]=l({mixins:[(0,i.e)()],props:{round:Boolean,duration:[Number,String],closeable:Boolean,transition:String,safeAreaInsetBottom:Boolean,closeIcon:{type:String,default:"cross"},closeIconPosition:{type:String,default:"top-right"},position:{type:String,default:"center"},overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},beforeCreate:function(){var t=this,e=function(e){return function(n){return t.$emit(e,n)}};this.onClick=e("click"),this.onOpened=e("opened"),this.onClosed=e("closed")},methods:{onClickCloseIcon:function(t){this.$emit("click-close-icon",t),this.close()}},render:function(){var t,e=arguments[0];if(this.shouldRender){var n=this.round,o=this.position,i=this.duration,r="center"===o,l=this.transition||(r?"van-fade":"van-popup-slide-"+o),u={};if((0,a.Xq)(i)){var d=r?"animationDuration":"transitionDuration";u[d]=i+"s"}return e("transition",{attrs:{appear:this.transitionAppear,name:l},on:{afterEnter:this.onOpened,afterLeave:this.onClosed}},[e("div",{directives:[{name:"show",value:this.value}],style:u,class:c((t={round:n},t[o]=o,t["safe-area-inset-bottom"]=this.safeAreaInsetBottom,t)),on:{click:this.onClick}},[this.slots(),this.closeable&&e(s.Z,{attrs:{role:"button",tabindex:"0",name:this.closeIcon},class:c("close-icon",this.closeIconPosition),on:{click:this.onClickCloseIcon}})])])}}})}}]);
//# sourceMappingURL=165.2a440857.js.map